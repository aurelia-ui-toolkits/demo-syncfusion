/*!
*  filename: ej.widget.angular.min.js
*  version : 14.2.0.28
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["angular","./ej.core.min"],n):n()})(function(){(function(n,t,i,r,u){"use strict";var o=r.module("ejangular",[]),f,s,h,c,e,l;t.module=o;f={firstCap:function(n){return n.charAt(0).toUpperCase()+n.slice(1)},generatePropMap:function(n,i,r,u){var o,s,e;typeof i!="string"||t.isNullOrUndefined(n)||(n.name=i,i={});o=i||{};u?u+=".":u="";r=r||"";for(e in n)s=r+f.firstCap(e.toLowerCase()),t.isPlainObject(n[e])&&f.generatePropMap(n[e],o,s,u+e,name),o[s]=u+e,t.isNullOrUndefined(n.name)||(o.ejCtlname=n.name);return o},getModel:function(i,r,u,e,o,s,h){var p={},l,c,nt=r.$attr||r,k=!i,y,w,d,tt,a,b,v,it,rt,g;if(i=i||(r===nt?{}:nt),h=h||"",t.isNullOrUndefined(r[i.ejCtlname])||r[i.ejCtlname]==""){for(a in nt)if(y=!0,w=d=null,k||a[0]==="e"&&/[A-Z]/.test(a[1])){if(c=r[a]||"",k||(a=a.slice(1)),typeof c=="object"){if(b=k?i[a]||a:a,c instanceof Array)for(v=0;v<c.length;v++)c[v]=f.getModel(null,c[v],u,e,o,s,h+b+"["+v+"]");else{it={};for(rt in c)(l=c.$attr[rt],l)&&(it[l]=f.getModel(null,c[rt],u,e,o,s,h+b+"."+l));c=it;l=t.getObject(b,p);l&&n.extend(!0,l,c);continue}t.createObject(b,c,p);continue}if(l=i[a]||a,y=!isNaN(c)||/^['"].+['"]$/.test(c),y===!1&&(y=c.indexOf("["),y===-1?y=!(c.split(".")[0]in u):(g=f.buildProperty(u,c),y=!g.available,y||(w=g.getter,d=g.setter))),y===!0){t.createObject(l,f.processData(c),p);continue}e.push({key:c,value:h+l,twoWay:o.indexOf(l)!==-1});w=w||t.getObject;d=d||t.createObject;c=k||o.indexOf(l)===-1||s&&a[0]==="V"&&a==="Value"?w(c,u):f.addTwoWays(c,u,w(c,u));t.createObject(l,c,p)}}else for(p=u[r[i.ejCtlname]],v=0;v<o.length;v++)t.isNullOrUndefined(t.getObject(o[v],u[r[i.ejCtlname]]))||(tt=r[i.ejCtlname]+"."+o[v],c=f.addTwoWays(tt,u,t.getObject(tt,u)),t.createObject(o[v],c,p));return p},buildProperty:function(n,i){var r=new Function("prop","instance","with (instance) { \nreturn "+i.replace(/^([^\[.]+)/,"instance['$1']")+"\n}"),u=new Function("prop","val","instance","with (instance) {"+i.replace(/^([^\[.]+)/,"instance['$1']")+" = val;\n}");return"$$ejProperties"in n||(n.$$ejProperties={}),n.$$ejProperties[i]={getter:r,setter:u},{available:!t.isNullOrUndefined(r(i,n)),getter:r,setter:u}},addTwoWays:function(n,i,r){var e=t.createObject;return"$$ejProperties"in i&&n in i.$$ejProperties&&(e=i.$$ejProperties[n].setter),function(t){if(t===u)return r;r=t;e(n,r,i);f.applyScope(i)}},valReplace:/^'(.+)'$|^"(.+)"$/g,processData:function(n){var t=n.replace(f.valReplace,"$1$2");return t==="true"?!0:t==="false"?!1:t!==n?t:(t=+t,t+""===n?t:n)},addWatches:function(n,i,r,u,f){for(var s,h,e,o=0;o<i.length;o++)s="$watch",h=t.getObject,e=i[o].key,"$$ejProperties"in n&&e in n.$$ejProperties&&(h=n.$$ejProperties[e].getter),h(e,n)instanceof Array&&!f&&(s="$watchCollection"),n[s](e,t.proxy(u,n,{control:r,watch:i[o]}),i[o].twoWay&&f)},raise:function(n,i,r){if(i!==r){var u=t.getObject(n.watch.value,n.control.model);(typeof u=="function"&&(u=u()),(u!==i||u instanceof Array)&&(u!==r||!(u instanceof Array)))&&(n.control.observables.indexOf(n.watch.value)===-1||n.control.type==="editor"&&n.watch.value==="value"||(i=f.addTwoWays(n.watch.key,this,i)),n.control.option(n.watch.value,i,i instanceof Array))}},angToEjProp:function(n,t){for(var i in t)if(t[i]===n)return i},modelChange:function(n,i){var r,u,e;i&&(r=t.getObject,u=t.createObject,"$$ejProperties"in n&&i in n.$$ejProperties&&(e=n.$$ejProperties[i],r=e.getter,u=e.setter),this.option("_change",function(t){t.value!==r(i,n)&&(u(i,t.value,n),f.applyScope(n))}))},getDirectiveName:function(n){if(n.length<4)return"";var t=n[2]==="m"?4:3;return n.slice(0,t)+n.slice(t).toLowerCase()},applyScope:function(n){setTimeout(function(){n.$apply()},0)},loadTags:function(n,t){var e=n,u,o,i,r;if(e)return e;for(e={},i=0;i<t.length;i++){for(u=t[i].attr||[],o={},r=0;r<u.length;r++)typeof u[r]=="object"?o["e-tag"]=f.loadTags(null,u[r]):o[u[r].toLowerCase().replace(/\./g,"-")]=u[r];e["e-"+t[i].tag.toLowerCase().replace(/\./g,"-")]={field:t[i].tag,attr:o,content:t[i].content,singular:(t[i].singular||t[i].tag.replace(/s$/,"")).replace(/\./g,"-")}}return e},getTagValues:function(t,i){var h=n(i).children(),e={$attr:{}},o,l,a;if(h.length===0)return e;for(o=0;o<h.length;o++){var s=n(h.get(o)),c,u=s.prop("tagName").toLowerCase(),r=t[u];if(!r){if(u=s[0].attributes[0],!u)continue;if(u=u.nodeName,r=t[u],!r)continue}l="e-"+r.singular;c=s.children(l+",["+l+"]");a=c.toArray().map(function(t){var i=f.readAttributes(t,r.attr),u,e;return r.content?(u=t.innerHTML,u.length&&(i[r.content]=t.innerHTML,i.$attr[r.content]=r.content)):r.attr["e-tag"]&&(e=f.getTagValues(r.attr["e-tag"],t),n.extend(!0,i||{},e)),i}).filter(function(n){return n});c.remove();s.remove();a.length&&(f.createAndAddAttr(r.field,a,e),e.$attr[r.field.toLowerCase().replace(/\..+/g,"")]=r.field.replace(/\..+/g,""))}return e},readAttributes:function(n,t){for(var e,r=n.attributes,i,f={},o={},u=0;u<r.length;u++)i=r[u].nodeName.replace(/^e-/i,"").toLowerCase(),i=t[i]||i,e=i.toLowerCase().replace(/\.([a-z]?)/g,function(n,t){return t.toUpperCase()}),f[e]=r[u].value||r[u].nodeValue,o[e]=i;return r.length&&(f.$attr=o),f},childRaise:function(n,i,r){var e,u;i!==r&&(e=t.getArrayObject(n.watch.value,n.control.model),e!==i||e instanceof Array)&&(t.setArrayObject(n.watch.value,i,n.control.model),u=f.parseFnAndIndex(n.watch.value),n.control[u[0]]&&n.control[u[0]](u[1],u[2],i,r))},parseFnAndIndex:function(n){for(var r="",e=n.lastIndexOf("]"),i=f.getAllFnIndices(n,[]),u={},t=0;t<i.length;t++)r+="_"+i[t].prop,u[i[t].prop]=i[t].index;return[r.replace(/\./g,"_"),u,n.slice(e+1)]},getAllFnIndices:function(n,t){var i=n.indexOf("["),r;return i===-1?null:(r=n.indexOf("]"),t.push({index:parseInt(n.substring(i+1,r),10),prop:n.substring(0,i)}),f.getAllFnIndices(n.slice(r+1),t),t)},addChildTwoway:function(n,i,r){for(var o={},e=t.createObject,u=0;u<i.length;u++)o[i[u].value]=i[u].key;n._notifyArrayChange=function(n,i){var u=o[n];u&&("$$ejProperties"in r&&u in r.$$ejProperties&&(e=r.$$ejProperties[u].setter),e(u,i,r),f.applyScope(r));e=t.createObject}},refreshTemplate:function(t,i,r){var e=n(t).find(".ej-angular-template"),u,f;for(u in r){if(f=e.filter("."+r[u].key),!f.length){r[u].scope.$destroy();delete r[u];continue}i(f.not(".ng-scope"))(r[u].scope)}},iterateAndGetModel:function(n,t,i,r){var s,o,e,u;if(n instanceof Array)for(e=0;e<n.length;e++)n[e]=f.getModel(null,n[e],i,t,[],!1,(r.endsWith(".")?r.slice(0,-1):r)+"["+e+"]");else for(u in n)u.slice(0,1)!=="$"&&(o=n.$attr&&n.$attr[u]?n.$attr[u]:u,s=f.iterateAndGetModel(n[u],t,i,r+o+"."),delete n[u],n[o]=s);return n},createAndAddAttr:function(n,i,r){for(var o=n.split("."),s=r||window,u=s,f,h=o.length,e=0;e<h;e++)f=o[e].toLowerCase(),e+1==h?(f in u||!u.$attr||(u.$attr[f]=o[e]),u[f]=t.isNullOrUndefined(i)?{$attr:{}}:i):t.isNullOrUndefined(u[f])&&(u.$attr&&(u.$attr[f]=o[e]),u[f]={$attr:{}}),u=u[f];return s},destroyWidget:function(n){var t,i;n.element.off(name+"refresh");n.destroy();t=n["tmpl.$newscope"]||{};for(i in t)t[i].scope.$destroy(),delete t[i];n=u}};t.getArrayObject=function(n,i){return n=n.replace(/\[([0-9]+)]/g,".$1."),t.getObject(n,i)};t.setArrayObject=function(n,i,r){return n=n.replace(/\[([0-9]+)]/g,".$1."),t.createObject(n,i,r)};s={transclude:{transclude:!0,template:function(){return"<div ng-transclude><\/div>"}},defaults:{terminal:!0}};h=function(i,r){c[i]=f.generatePropMap(r.defaults,i);r.observables=r.observables||[];r._notifyArrayChange=function(){};var e=n.extend({},s[r.type]||s.defaults,r.angular);o.directive(f.getDirectiveName(i),["$compile","$timeout",function(o,s){return n.extend({restrict:"CEA",compile:function(h){if(e.require&&e.require.length){var l=h.attr("ng-model"),a=h.attr("e-value"),v=h.attr("ng-model-options");if((!l||!a)&&(l||a))return a&&h.attr("ng-model",a),l&&h.attr("e-value",l),v||h.attr("ng-model-options","{updateOn: ' '}"),function(n,t){o(t)(n)};h.addClass("ng-pristine").addClass("ng-valid")}return{pre:function(n,t,i,r){if(r&&r.length&&r[0]){var e=r[0],f=r[1],u=r[2];f&&f.$addControl(e);u&&!t.attr("ng-model-options")&&(u.$options.updateOn="",u.$options.updateOnDefault=!1)}},post:function(h,l,a,v){var nt=[],tt=r.type==="editor",d=f.getModel(c[i],a,h,nt,r.observables,tt),b=[],k=a[f.getDirectiveName(i)]||a.id,it=l.attr("e-deepwatch")==="true",g,rt,w,y,p;if(r._tags&&r._tags.length&&(rt=r["ob.tags"]=f.loadTags(r["ob.tags"],r._tags),w=f.getTagValues(rt,l),w=f.iterateAndGetModel(w,b,h,""),delete w.$attr,t.copyObject(d,w)),e.requireFormatters&&v&&v.length&&v[0]&&(d._change=function(n){g=n.value;v[0].$setViewValue(n.value);v[0].$commitViewValue()}),y=n(l)[i](d).data(i),!k||k in h||(h[k]=y,y.scopeId=k),f.addWatches(h,nt,y,f.raise,it),b.length&&(f.addWatches(h,b,y,f.childRaise,it),f.addChildTwoway(y,b,h)),v&&v.length&&v[0]){p=v[0];p.$setViewValue(g===u?l.val():g);p.$commitViewValue();p.$setPristine(!0);e.requireFormatters&&p.$formatters.push(function(){return y.element.val()});l.on(i+"_change",function(t){if(t.source!=="source"){var i=n(t.target);p.$setViewValue(t.value);p.$modelValue=t.model.value;p.$commitViewValue();f.applyScope(h)}})}tt&&f.modelChange.apply(y,[h,a.eValue]);"tmpl.$newscope"in y&&f.refreshTemplate(l,o,y["tmpl.$newscope"]);y.element.on(i+"refresh",function(){"tmpl.$newscope"in y&&f.refreshTemplate(l,o,y["tmpl.$newscope"])});h.$on("$destroy",function(){t.angularMobileSettings&&t.angularMobileSettings.enableAnimation?s(function(){f.destroyWidget(y)},t.angularMobileSettings.animationTime):f.destroyWidget(y)})}}}},e)}])};o.directive("ejTemplate",["$compile",function(n){return{restrict:"EA",priority:999,terminal:!0,link:function(t,i,r){var u=t.$parent.$new(!0);t.ejObject&&(u.ejId=t.ejId,u.ejObject=t.ejObject,u.items=t.items,u.model=t.model,u.data=t.items[r.ejProp],n(i.children(),t)(u),t.$parent.$$phase||u.$digest())}}}]);c={};e=i.registeredWidgets;for(l in e)h(e[l].name,e[l].proto);t.widget.extensions={registerWidget:function(n){h(n,e[n].proto)}};Array.prototype.map=Array.prototype.map||function(n,t){for(var i=[],r=0;r<this.length;)i.push(n.call(t,this[r++]));return i};t.template["text/ng-template"]=function(i,r,u,f){var h=angular.element(i.element[0]),e,s,o=i["tmpl.$newscope"];return o&&o[r]||(o=o||{},o[r]={scope:h.scope().$new(!0),key:t.getGuid("tmpl")},e=o[r].scope,e.model=i.model,e.ejId=i._id,e.ejObject=i,i["tmpl.$newscope"]=o),e=o[r].scope,t.isNullOrUndefined(f)?(f=1,e.items=[u]):(e.items||(e.items=[]),e.items[f]=u),s=r||"",s.startsWith("#")&&(s=n(s).html()),"<div ej-template ej-prop='"+f+"' class='"+o[r].key+" ej-angular-template'>"+s+"<\/div>"};t.template.render=t.template["text/ng-template"]})(window.jQuery,window.Syncfusion,window.Syncfusion.widget,window.angular)});
